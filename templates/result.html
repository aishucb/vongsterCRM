<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100&family=Rubik:wght@300&display=swap"
        rel="stylesheet">
  <title>Result</title>
  <style>
    body {
     
      margin: 20px;
      background-color: #ffffff;
    }

    h1 {
      text-align: center;
      color: #000000;
      margin-bottom: 20px;
    }

    .details {
      border: 1px solid #a0e9ff;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 8px;
      background-color: #ffffff;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .details div {
      margin-bottom: 10px;
    }

    .heading {
      margin-top: 30px;
      margin-bottom: 20px;
      font-size: 16px;

    }

    .custom-button {
      display: inline-block;
      position: relative;
      padding: 1px 4px;
      background-color: #000000;
      color: #ffffff;
      text-decoration: none;
      border-radius: 5px;
      text-align: center;
      transition: background-color 0.3s ease;
      float: right;
      margin-top: 27px;
    }

    .custom-button:hover {
      background-color: #000000;
    }

    .data-table {

      border-collapse: collapse;
      margin-bottom: 30px;
      background-color: #ffffff;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      opacity: 0;
      animation: fadeIn 0.5s ease forwards;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    .data-table th,
    .data-table td {
      border: 0px solid #a0e9ff;
      padding: 9px;
      text-align: left;
    }

    .data-table th {
      background-color: #a0e9ff;
      color: #ffffff;
    }

    .data-table tr:hover {
      background-color: #f0faff;
    }

    .toggle-span {
      cursor: pointer;
      color: #a0e9ff;
      text-decoration: underline;
    }

    canvas {
      display: block;
      margin: 20px auto;
      background-color: #ffffff;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    table {
      width: 100%;
      margin-top: 20px;
    }

    th,
    td {
      text-align: left;
      padding: 8px;
    }

    body {
      margin-top: 20px;
      color: #1a202c;
      text-align: left;
      background-image: url("../images/bg.jpg");
      background-size: cover;
      font-family: 'Inter', sans-serif;
      font-family: 'Rubik', sans-serif;

    }

    .main-body {
      padding: 15px;
    }

    .card {
      box-shadow: 0 1px 3px 0 rgba(0, 0, 0, .1), 0 1px 2px 0 rgba(0, 0, 0, .06);
    }

    .card {
      position: relative;
      display: flex;
      flex-direction: column;
      min-width: 0;
      word-wrap: break-word;
      background-color: #fff;
      background-clip: border-box;
      border: 0 solid rgba(0, 0, 0, .125);
      border-radius: .25rem;
    }

    .card-body {
      flex: 1 1 auto;
      min-height: 1px;
      padding: 1rem;
    }

    .gutters-sm {
      margin-right: -8px;
      margin-left: -8px;
    }

    .gutters-sm>.col,
    .gutters-sm>[class*=col-] {
      padding-right: 8px;
      padding-left: 8px;
    }

    .mb-3,
    .my-3 {
      margin-bottom: 1rem !important;
    }

    .bg-gray-300 {
      background-color: #e2e8f0;
    }

    .h-100 {
      height: 100% !important;
    }

    .shadow-none {
      box-shadow: none !important;
    }
    
  </style>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
  {% for data2 in cv %}
  <div class="container">
    <div class="main-body">


      <div class="row gutters-sm">
        <div class="col-md-4 mb-3">
          <div class="card">
            <div class="card-body">
              <div class="d-flex flex-column align-items-center text-center">
                <img src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="Admin" class="rounded-circle"
                  width="150">
                <div class="mt-3">
                  <h2>{{ data2.full_name }}</h2>
                  {% if data2.active == 'Active' %}
                  <select class="form-control" id="statusSelect" onchange="updateStatus('{{ data.full_name }}')">
                    <option value="active" selected>Active</option>
                    <option value="dormant">Dormant</option>
                  {% endif %}
                  {% if data2.active == 'Dormant' %}
                  <select class="form-control" id="statusSelect" onchange="updateStatus('{{ data.full_name }}')">
                    <option value="active" >Active</option>
                    <option value="dormant" selected>Dormant</option>
                  {% endif %}
                </select>

                


                </div>
              </div>
            </div>
          </div>
          <div class="card mt-3">
            <canvas id="lineChart" width="800" height="400" onclick="toggleSize()"></canvas>
          </div>
        </div>
        <div class="col-md-8">
          <div class="card mb-3">
            <div class="card-body">
              <div class="row">
                <div class="col-sm-3">
                  <h6 class="mb-0">Full Name</h6>
                </div>
                <div class="col-sm-9 text-secondary">
                  {{ data2.full_name }}
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-sm-3">
                  <h6 class="mb-0">Roll number</h6>
                </div>
                <div class="col-sm-9 text-secondary">
                  {{ data2.roll_number }}
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-sm-3">
                  <h6 class="mb-0">Email</h6>
                </div>
                <div class="col-sm-9 text-secondary">
                  {{ data2.email }}
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-sm-3">
                  <h6 class="mb-0">Mobile</h6>
                </div>
                <div class="col-sm-9 text-secondary">
                  {{ data2.phone }}
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-sm-3">
                  <h6 class="mb-0">City</h6>
                </div>
                <div class="col-sm-9 text-secondary">
                  {{ data2.city }}
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-sm-3">
                  <h6 class="mb-0">School name</h6>
                </div>
                <div class="col-sm-9 text-secondary">
                  {{ data2.institution }}
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-sm-3">
                  <h6 class="mb-0">House Name</h6>
                </div>
                <div class="col-sm-9 text-secondary">
                  {{ data2.house }}
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col-sm-3">
                  <h6 class="mb-0">Address</h6>
                </div>
                <div class="col-sm-9 text-secondary">
                  {{ data2.address }}
                </div>
              </div>
              <hr>

            </div>
          </div>
        </div>

      </div>

    </div>
    <div class="row" >
      <div class="col-sm-12 " >
        <div class="card h-100" >
          <div class="card-body" >

            <h1 class="heading" style="display: inline-block; text-align: center;"
              onclick="toggleDisplay('Review Call Dates')">Review Call Dates</h1>
            <a href="/table_data?full_name={{ data2.full_name }}" class="custom-button"
              style="display: inline-block; margin-left: 20px;">+</a>
            {% for data in cv %}
            <div id="Review Call Dates" style="display: none;">
              {% endfor %}

              {% for item in data %}
              <br>
              <table class="data-table" id="{{ item['date'] }}" style="display: none;" >
                <form action="/table_full_data_entry_update?full_name={{ data2.full_name}}" method="post" >
                {% for key, value in item.items() %}
                {% if key == 'date' %}
                <br><br><span onclick="toggleDisplay('{{ value }}')">
                  {{ value }}<br>
                </span> <br>
                {% endif %}

                {% if key != '_id' %}
                <tr>
                 
                  <td >{{ key }}  </td>
                  <td ><textarea type="text" id="{{ value }}" name="{{ key }}" style="width: 100vh;" >{{ value }}</textarea>
                  </td>
                </tr>
                {% endif %}
                {% endfor %}
                <tr><td><button type="submit" class="submit-button" >Update</button></td></tr>
              </form>
              </table>
              {% endfor %}
              
            </div>
            {% endfor %}
            

          </div>
          
        </div>
        
      </div>
      
      <div class="col-sm-12">
        <div class="card h-100">
          <div class="card-body">
            <h1 class="heading" style="display: inline-block; text-align: center;"
              onclick="toggleDisplay('Motivation Tracker Attributes')">Motivation Tracker Attributes</h1>
            <div id="Motivation Tracker Attributes" style="display: none;">
              <br><br><span onclick="toggleDisplay('Preference for Activities')">Preference for Activities:</span>
              <br><br>
              <table class="data-table" id="Preference for Activities" style="display: none;padding-bottom: 10px;" >
                {% for item in data %}
                <tr>
                  {% for key, value in item.items() %}

                  {% if key == 'date' %}
                  <td>{{ value }} </td>
                  {% endif %}
                  {% if key == 'Preference for Activities' %}
                  <td>{{ value }} </td>
                  {% endif %}
                  {% endfor %}
                </tr>
                {% endfor %}
              </table>
              <br><span onclick="toggleDisplay('Preferred Time and days for Activities')">Preferred Time and days for
                Activities:</span> <br>
              <table class="data-table" id="Preferred Time and days for Activities"
                style="display: none;padding-bottom: 10px;">
                {% for item in data %}
                <tr>
                  {% for key, value in item.items() %}

                  {% if key == 'date' %}
                  <td>{{ value }} </td>
                  {% endif %}
                  {% if key == 'Preferred Time and days for Activities' %}
                  <td>{{ value }} </td>
                  {% endif %}
                  {% endfor %}
                </tr>
                {% endfor %}
              </table>
              <br><br><span onclick="toggleDisplay('Reasons for Not participating')">Reasons for Not
                participating:</span> <br>
              <table class="data-table" id="Reasons for Not participating" style="display: none;padding-bottom: 10px;">
                {% for item in data %}
                <tr>
                  {% for key, value in item.items() %}

                  {% if key == 'date' %}
                  <td>{{ value }} </td>
                  {% endif %}
                  {% if key == 'Reasons for Not participating' %}
                  <td>{{ value }} </td>
                  {% endif %}
                  {% endfor %}
                </tr>
                {% endfor %}
              </table>
              <br><br><span onclick="toggleDisplay('Suggestions / Feedback about vong Activities')">Suggestions /
                Feedback about vong
                Activities:</span> <br>
              <table class="data-table" id="Suggestions / Feedback about vong Activities"
                style="display: none;padding-bottom: 10px;">
                {% for item in data %}
                <tr>
                  {% for key, value in item.items() %}

                  {% if key == 'date' %}
                  <td>{{ value }} </td>
                  {% endif %}
                  {% if key == 'Suggestions / Feedback about vong Activities' %}
                  <td>{{ value }} </td>
                  {% endif %}
                  {% endfor %}
                </tr>
                {% endfor %}
              </table>
              <br><br><span onclick="toggleDisplay('Willing to participate in future (Yes / No)')">Willing to
                participate in future (Yes
                / No):</span> <br>
              <table class="data-table" id="Willing to participate in future (Yes / No)"
                style="display: none;padding-bottom: 10px;">
                {% for item in data %}
                <tr>
                  {% for key, value in item.items() %}

                  {% if key == 'date' %}
                  <td>{{ value }} </td>
                  {% endif %}
                  {% if key == 'Willing to participate in future (Yes / No)' %}
                  <td>{{ value }} </td>
                  {% endif %}
                  {% endfor %}
                </tr>
                {% endfor %}
              </table>
              <br><br><span onclick="toggleDisplay('Upcoming /Ongoing Exam Schedule')">Upcoming /Ongoing Exam
                Schedule:</span> <br>
              <table class="data-table" id="Upcoming /Ongoing Exam Schedule"
                style="display: none;padding-bottom: 10px;">
                {% for item in data %}
                <tr>
                  {% for key, value in item.items() %}

                  {% if key == 'date' %}
                  <td>{{ value }} </td>
                  {% endif %}
                  {% if key == 'Upcoming /Ongoing Exam Schedule' %}
                  <td>{{ value }} </td>
                  {% endif %}
                  {% endfor %}
                </tr>
                {% endfor %}
              </table>
            </div><br>
          </div>
        </div>
      </div>
      <div class="col-sm-12 " style="margin-top: 20px;">
        <div class="card h-100">
          <div class="card-body" style="text-align: center;">
            <h1 onclick="toggleDisplay2('linechartcard')"  class="heading" style="display: inline-block; text-align: center;">
              Performance Analysis</h1>

            <div id="linechartcard" style="display: none;">
              <canvas id="lineChart2" width="800" height="400" onclick="toggleSize()"></canvas>
              <table class="data-table" style="padding-bottom: 10px;">
                {% for item in dataofpart %}
                <tr>
                  {% for key, value in item.items() %}
                  {% if key == 'itemname' %}
                  <td>{{ value }} </td>
                  {% endif %}
                  {% if key == 'mark' %}
                  <td>{{ value }} </td>
                  {% endif %}
                  {% endfor %}
                </tr>
                {% endfor %}
              </table>
            </div>
          </div>
        </div>
      </div>  
    </div>
  
    
  
  <script>
    function toggleDisplay(elementId) {
      var element = document.getElementById(elementId);

      if (element) {
        if (element.style.display === 'none') {
          element.style.display = 'inline'; // or 'block', depending on your needs
        } else {
          element.style.display = 'none';
        }
      } else {
        console.error('Element with ID ' + elementId + 'h not found.');
      }
    }

    var data = {{ dataroll_json | safe }};

    var ctx = document.getElementById('lineChart').getContext('2d');

    var myChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: data.map((value, index) => index + 1),
        datasets: [{
          label: 'Line Graph',
          data: data,
          borderColor: 'black',
          borderWidth: 2,
          fill: false
        }]
      },
      options: {
        scales: {
          x: {
            title: {
          display: true,
          text: 'Time'
        },
            type: 'linear',
            position: 'bottom'
          },
          y: {
            title: {
          display: true,
          text: 'Score'
        },
            min: 0
          }
        }
      }
    });
    function toggleDisplay2(elementId)
    {
      toggleDisplay(elementId);
    var ctx = document.getElementById('lineChart2').getContext('2d');

    var myChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: data.map((value, index) => index + 1),
        datasets: [{
          label: 'Line Graph',
          data: data,
          borderColor: 'black',
          borderWidth: 2,
          fill: false
        }]
      },
      options: {
        scales: {
          x: {
            title: {
          display: true,
          text: 'Time'
        },
            type: 'linear',
            position: 'bottom'
          },
          y: {
            title: {
          display: true,
          text: 'Score'
        },
            min: 0
          }
        }
      }
    });
  }
  function updateStatus(fullname) {
    console.log("hello");
    var selectedStatus = document.getElementById('statusSelect').value;

    // You can use AJAX to send the selectedStatus to the Flask backend
    // For simplicity, I'm using the fetch API here
    fetch(`/update_status?full_name=${encodeURIComponent(fullname)}`, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ status: selectedStatus }),
    })
    .then(response => response.json())
    .then(data => {
        console.log('Status updated successfully:', data);
        // You may want to update the UI or perform additional actions here
    })
    .catch(error => {
        console.error('Error updating status:', error);
    });
}

  </script>
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>

</body>

</html>